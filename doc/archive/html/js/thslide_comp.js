(function(a){a.fn.barousel=function(f){var h=a.extend({imageWrapper:".barousel_image",contentWrapper:".barousel_content",contentLinksWrapper:null,navWrapper:".barousel_nav",slideDuration:5000,navType:1,fadeIn:1,fadeInSpeed:600,manualCarousel:0,contentResize:1,contentResizeSpeed:300,debug:0},f||{});h.imageWrapper=a(this).find(h.imageWrapper);h.contentWrapper=a(this).find(h.contentWrapper);h.contentLinksWrapper=a(h.contentLinksWrapper);h.navWrapper=a(this).find(h.navWrapper);h.imageList=h.imageWrapper.find("img").not("[class*=intro]");h.contentList=h.contentWrapper.find("div").not("[class*=intro]");h.contentLinksList=h.contentLinksWrapper.find("a");h.imageIntro=h.imageWrapper.find("img[class*=intro]");h.contentIntro=h.contentWrapper.find("div[class*=intro]");h.currentIndex=1;h.totalItem=h.imageList.length;h.stopCarousel=0;h.timerCarousel;h.navFreeze=0;h.introActive=0;if(h.imageWrapper.find("img[class*=intro]").length>0){h.introActive=1}if(h.totalItem==1){}else{h.imageList.each(function(i){this.index=i});h.contentList.each(function(i){this.index=i});h.contentLinksList.each(function(i){this.index=i});if(h.imageList.length!=h.contentList.length){if(h.debug==1){console.log("[Barousel error] images and contents must be the same number")}return this}if(h.contentResize==1&&h.introActive==0){a(h.contentWrapper).height(a(h.contentList[h.currentIndex]).height()+10)}if(h.contentLinksWrapper!=null){a(h.contentLinksList[h.currentIndex]).addClass("current")}if(h.navType==1){var g="<ul>";h.imageList.each(function(j){var i="";if(j==0){i="current"}g+="<li><a href='#' title='"+a(h.contentList[j]).find("p.header").text()+"' class='"+i+"'>&nbsp;</a></li>"});g+="</ul>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a");h.navList.each(function(i){this.index=i})}else{if(h.navType==2){var g="<ul>";g+="<li class='prev'><a href='#' title='previous'>&nbsp;</a></li>";g+="<li class='next'><a href='#' title='next'>&nbsp;</a></li>";g+="</ul><div class='counter'><span class='counter_current'>1</span>/<span class='counter_total'>"+h.totalItem+"</span></div>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a")}else{if(h.navType==3){h.navList=h.navWrapper.find("a");h.navList.each(function(i){this.index=i})}}}if(h.navType==1||h.navType==3){h.navList.each(function(i){a(this).click(function(){if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;if(h.currentIndex!=i||h.introActive==1){d(h,i);h.currentIndex=i}}h.introActive=0;return false})})}else{if(h.navType==2){h.navList.each(function(){a(this).click(function(){if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;if(a(this).parent().hasClass("prev")){var j;if(parseInt(h.currentIndex)==0){j=parseInt(h.totalItem)-1}else{j=parseInt(h.currentIndex)-1}d(h,j);h.currentIndex=j}else{if(a(this).parent().hasClass("next")){var i;if(parseInt(h.currentIndex)==(parseInt(h.totalItem)-1)){i=0}else{i=parseInt(h.currentIndex)+1}d(h,i);h.currentIndex=i}}}h.introActive=0;return false})})}}if(h.manualCarousel==0){var e=function(){d(h,1)};h.timerCarousel=window.setTimeout(e,h.slideDuration)}}return this};var d=function(i,g){if(i.navType!=2){i.navList.each(function(k){a(this).removeClass("current")});a(i.navList[g]).addClass("current")}var j;if(i.introActive==1){j=a(i.imageIntro)}else{j=a(i.imageList[i.currentIndex])}var h=a(i.imageList[g]);if(i.debug==1){console.log("[Barousel loadItem] currentImage:"+j.attr("src"));console.log("[Barousel loadItem] nextImage:"+h.attr("src"))}if(!j.hasClass("default")){j.attr("class","previous")}h.attr("class","current");if(i.fadeIn==0){h.show();j.hide();b(i,g)}else{i.navFreeze=1;a(i.contentList).hide();h.fadeIn(i.fadeInSpeed,function(){j.hide();j.removeClass("previous");i.navFreeze=0});b(i,g)}if(i.stopCarousel==0){i.currentIndex=g;var f;if(i.currentIndex==i.totalItem-1){f=0}else{f=parseInt(i.currentIndex)+1}var e=function(){d(i,f)};i.timerCarousel=window.setTimeout(e,i.slideDuration)}};var b=function(f,e){if(f.introActive==1){a(f.contentIntro).hide();a(f.contentWrapper).attr("class","")}if(f.contentResize==1&&parseInt(a(f.contentWrapper).height())!=parseInt(a(f.contentList[e]).height()+10)){a(f.contentWrapper).animate({height:a(f.contentList[e]).height()+10},f.contentResizeSpeed,function(){c(f,e)})}else{c(f,e)}if(f.navType==2){a(f.navWrapper).find(".counter_current").text(e+1)}};var c=function(f,e){a(f.contentList).hide();a(f.contentList[e]).show();if(f.contentLinksWrapper!=null){a(f.contentLinksList).removeClass("current");a(f.contentLinksList[e]).addClass("current")}}})(jQuery);(function(f){f.fn.thslide=function(o,q){var p=f.extend({navPreviousWrapper:".thslide_nav_previous a",navNextWrapper:".thslide_nav_next a",listWrapper:".thslide_list ul",items:".thslide_list ul li a",itemOffset:100,itemVisible:5,slideSpeedSlow:600,slideSpeedFast:200,infiniteScroll:0,scrollOver:0,debug:0},o||{});p.navPreviousWrapper=f(this).find(p.navPreviousWrapper);p.navNextWrapper=f(this).find(p.navNextWrapper);p.listWrapper=f(this).find(p.listWrapper);p.items=f(this).find(p.items);p.totalItem=f(p.listWrapper).find("li").length;p.itemOffsetMax;p.listMarginLeft;p.slideSpeed;p.easing;p.locked=false;p.scrollOn=false;p.scrollTimer=0;p.navTimer;p.offsetStatus=0;p.offsetCurrent=3;p.manualCarousel=0;p.slideDuration=5000;p.autoSlid=false;p.wrapNum=p.itemVisible;p.wrapMid=p.offsetCurrent;if(p.totalItem<p.itemVisible){p.wrapNum=p.totalItem}if(p.totalItem==1){f(".thslide_nav_previous").hide();f(".thslide_nav_next").hide();return}if(p.manualCarousel==0){d(p)}if(p.totalItem<3){p.offsetCurrent=f(".thslide_item").length;p.wrapMid=p.offsetCurrent}if(q!=undefined){a(p,q)}j(p);p.itemOffsetMax=parseInt(f(p.listWrapper).find("li").length)*p.itemOffset-(p.itemVisible*p.itemOffset);p.itemOffsetMax=-parseInt(p.itemOffsetMax);p.items.click(function(r){r.preventDefault();id=f(this).attr("id");thecount=id.split("_");thecount=thecount[1];a(p,thecount);f("#screening_hidden_"+thecount).click();window.clearTimeout(p.timerCarousel);p.slideDuration=20000;d(p);return false});f(p.navPreviousWrapper).click(function(){window.clearTimeout(p.timerCarousel);p.slideDuration=20000;d(p);return false});f(p.navNextWrapper).click(function(){window.clearTimeout(p.timerCarousel);p.slideDuration=20000;d(p);return false});f(p.navPreviousWrapper).mousedown(function(){window.clearTimeout(p.timerCarousel);window.clearTimeout(p.navTimer);p.scrollOn=true;p.slideSpeed=p.slideSpeedFast;p.easing="swing";n();b(p)});f(p.navNextWrapper).mousedown(function(){window.clearTimeout(p.timerCarousel);window.clearTimeout(p.navTimer);p.scrollOn=true;p.slideSpeed=p.slideSpeedFast;p.easing="swing";n();c(p)});f(p.navPreviousWrapper).mouseup(function(){p.scrollOn=false;e(p);f("#screening_hidden_"+p.offsetCurrent).click()});f(p.navNextWrapper).mouseup(function(){p.scrollOn=false;e(p);f("#screening_hidden_"+p.offsetCurrent).click()});if(p.scrollOver==1){f(p.navPreviousWrapper).mouseover(function(){if(!p.scrollOn){p.scrollOn=true;p.slideSpeed=p.slideSpeedSlow;p.easing="linear";var r=function(){b(p)};p.navTimer=window.setTimeout(r,p.scrollTimer)}});f(p.navNextWrapper).mouseover(function(){if(!p.scrollOn){p.scrollOn=true;p.slideSpeed=p.slideSpeedSlow;p.easing="linear";var r=function(){c(p)};p.navTimer=window.setTimeout(r,p.scrollTimer)}});f(p.navPreviousWrapper).mouseout(function(){p.scrollOn=false;e(p);f("#screening_hidden_"+p.offsetCurrent).click()});f(p.navNextWrapper).mouseout(function(){p.scrollOn=false;e(p);f("#screening_hidden_"+p.offsetCurrent).click()})}return this};var b=function(o){if(!o.locked&&o.scrollOn&&((parseInt(o.listMarginLeft)+parseInt(o.itemOffset)<=0)||o.infiniteScroll==1)){if(o.offsetCount){if(o.offsetCount==o.offsetStatus){o.scrollOn=false;o.offsetStatus=0;o.offsetCount=null;e(o);return}o.offsetStatus+=1}if(o.offsetCurrent==1){o.offsetCurrent=o.totalItem}else{o.offsetCurrent-=1}o.locked=true;if(o.infiniteScroll==1){g(o,function(){m(o)})}else{m(o)}}};var m=function(p){var o=parseInt(p.listMarginLeft)+parseInt(p.itemOffset);if(p.debug==1){console.log("offsetUpdate: "+o)}f(p.listWrapper).animate({marginLeft:o},p.slideSpeed,p.easing,function(){if(p.infiniteScroll==0){j(p)}p.locked=false;if(p.scrollOn){p.easing="linear";b(p)}})};var c=function(p){if(!p.locked&&p.scrollOn&&(((parseInt(p.listMarginLeft)-parseInt(p.itemOffset))>=p.itemOffsetMax)||p.infiniteScroll==1)){if(p.offsetCount){if(p.offsetCount==p.offsetStatus){p.scrollOn=false;p.offsetStatus=0;p.offsetCount=null;e(p);return}p.offsetStatus+=1}if(p.offsetCurrent<p.totalItem){p.offsetCurrent+=1}else{p.offsetCurrent=1}p.locked=true;var o=-parseInt(p.itemOffset);if(p.debug==1){console.log("offsetUpdate: "+o)}f(p.listWrapper).animate({marginLeft:o},p.slideSpeed,p.easing,function(){if(p.infiniteScroll==0){j(p)}else{i(p,null)}p.locked=false;if(p.scrollOn){p.easing="linear";c(p)}})}};var h=function(p){for(var o=0;o<p.totalItem;o++){var q=parseInt(f(p.listWrapper).find("li").length-1)-parseInt(o);f(p.listWrapper).find("li:eq("+q+")").clone().insertBefore(f(p.listWrapper).find("li:first-child")).addClass("thslide_copy")}l(p)};var g=function(o,q){var p=f(o.listWrapper).find("li:last-child");f(o.listWrapper).find("li:first-child").before(p);f(o.listWrapper).css("marginLeft",-parseInt(o.itemOffset));j(o);if(typeof q=="function"){return q()}};var i=function(o,q){var p=f(o.listWrapper).find("li:first-child");f(o.listWrapper).find("li:last-child").after(p);f(o.listWrapper).css("marginLeft",0);j(o);if(typeof q=="function"){return q()}};var j=function(o){o.listMarginLeft=f(o.listWrapper).css("marginLeft").split("px")[0]};var l=function(o){f(o.listWrapper).css("marginLeft",-parseInt(o.itemOffset));j(o)};var n=function(){f(".thslide_item img").attr("class","ogcar_floatright other");f(".thslide_item span").attr("class","other")};var e=function(o){f("#screening_"+o.offsetCurrent+" img").attr("class","ogcar_floatright default");f("#screening_"+o.offsetCurrent+" span").attr("class","default")};var k=function(o){var r=f(".thslide_item img.default").parent().attr("id");if(!r){return}thecount=r.split("_");thecount=thecount[1];if(thecount==o.totalItem){thecount=0}var q=parseInt(thecount);var p=(q+1);a(o,p);f("#screening_hidden_"+p).click();if(o.manualCarousel==0){o.slideDuration=5000;d(o)}};var a=function(p,o){if(o==p.offsetCurrent){return}window.clearTimeout(p.navTimer);p.scrollOn=true;n();p.easing="swing";if(o>p.offsetCurrent){if((p.offsetCurrent<p.wrapMid)&&(o>(p.wrapNum+1))){var q=(parseInt(p.totalItem)+parseInt(p.offsetCurrent))-o;p.offsetCount=q;b(p)}else{p.offsetCount=o-p.offsetCurrent;c(p)}}if(o<p.offsetCurrent){if((p.offsetCurrent>(p.wrapNum+1))&&(o<p.wrapMid)){var q=(parseInt(o)+parseInt(p.totalItem))-parseInt(p.offsetCurrent);p.offsetCount=q;c(p)}else{var q=parseInt(p.offsetCurrent)-parseInt(o);p.offsetCount=q;b(p)}}};var d=function(p){var o=function(){k(p)};p.timerCarousel=window.setTimeout(o,p.slideDuration)}})(jQuery);