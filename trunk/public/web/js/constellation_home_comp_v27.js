(function(a){a.fn.barousel=function(f){var h=a.extend({imageWrapper:".barousel_image",contentWrapper:".barousel_content",contentLinksWrapper:null,navWrapper:".barousel_nav",slideDuration:5000,navType:1,fadeIn:0,fadeInSpeed:600,manualCarousel:0,contentResize:1,contentResizeSpeed:300,debug:0},f||{});h.imageWrapper=a(this).find(h.imageWrapper);h.contentWrapper=a(this).find(h.contentWrapper);h.contentLinksWrapper=a(h.contentLinksWrapper);h.navWrapper=a(this).find(h.navWrapper);h.imageList=h.imageWrapper.find("img").not("[class*=intro]");h.contentList=h.contentWrapper.find("div").not("[class*=intro]");h.contentLinksList=h.contentLinksWrapper.find("a");h.imageIntro=h.imageWrapper.find("img[class*=intro]");h.contentIntro=h.contentWrapper.find("div[class*=intro]");h.currentIndex=1;h.totalItem=h.imageList.length;h.stopCarousel=0;h.timerCarousel;h.navFreeze=0;h.introActive=0;if(h.imageWrapper.find("img[class*=intro]").length>0){h.introActive=1}if(h.totalItem==1){}else{h.imageList.each(function(j){this.index=j});h.contentList.each(function(j){this.index=j});h.contentLinksList.each(function(j){this.index=j});if(h.imageList.length!=h.contentList.length){if(h.debug==1){console.log("[Barousel error] images and contents must be the same number")}return this}if(h.contentResize==1&&h.introActive==0){a(h.contentWrapper).height(a(h.contentList[h.currentIndex]).height()+10)}if(h.contentLinksWrapper!=null){a(h.contentLinksList[h.currentIndex]).addClass("current")}if(h.navType==1){var g="<ul>";h.imageList.each(function(k){var j="";if(k==0){j="current"}g+="<li><a href='#' title='"+a(h.contentList[k]).find("p.header").text()+"' class='"+j+"'>&nbsp;</a></li>"});g+="</ul>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a");h.navList.each(function(j){this.index=j})}else{if(h.navType==2){var g="<ul>";g+="<li class='prev'><a href='#' title='previous'>&nbsp;</a></li>";g+="<li class='next'><a href='#' title='next'>&nbsp;</a></li>";g+="</ul><div class='counter'><span class='counter_current'>1</span>/<span class='counter_total'>"+h.totalItem+"</span></div>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a")}else{if(h.navType==3){h.navList=h.navWrapper.find("a");h.navList.each(function(j){this.index=j})}}}if(h.navType==1||h.navType==3){h.navList.each(function(j){a(this).click(function(){if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;console.log("Current Index is: "+h.currentIndex);if(h.currentIndex!=j||h.introActive==1){d(h,j);h.currentIndex=j}}h.introActive=0;return false})})}else{if(h.navType==2){h.navList.each(function(){a(this).click(function(){if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;if(a(this).parent().hasClass("prev")){var k;if(parseInt(h.currentIndex)==0){k=parseInt(h.totalItem)-1}else{k=parseInt(h.currentIndex)-1}d(h,k);h.currentIndex=k}else{if(a(this).parent().hasClass("next")){var j;if(parseInt(h.currentIndex)==(parseInt(h.totalItem)-1)){j=0}else{j=parseInt(h.currentIndex)+1}d(h,j);h.currentIndex=j}}}h.introActive=0;return false})})}}if(h.manualCarousel==0){var e=function(){d(h,1)};h.timerCarousel=window.setTimeout(e,h.slideDuration)}}return this};var d=function(j,g){console.log("Load Item "+g);if(j.navType!=2){j.navList.each(function(l){a(this).removeClass("current")});a(j.navList[g]).addClass("current")}var k;if(j.introActive==1){k=a(j.imageIntro)}else{k=a(j.imageList[j.currentIndex])}var h=a(j.imageList[g]);if(j.debug==1){console.log("[Barousel loadItem] currentImage:"+k.attr("src"));console.log("[Barousel loadItem] nextImage:"+h.attr("src"))}if(!k.hasClass("default")){k.attr("class","previous")}h.attr("class","current");if(j.fadeIn==0){h.show();k.hide();b(j,g)}else{j.navFreeze=1;a(j.contentList).hide();h.fadeIn(j.fadeInSpeed,function(){k.hide();k.removeClass("previous");j.navFreeze=0});b(j,g)}if(j.stopCarousel==0){j.currentIndex=g;var f;if(j.currentIndex==j.totalItem-1){f=0}else{f=parseInt(j.currentIndex)+1}var e=function(){d(j,f)};j.timerCarousel=window.setTimeout(e,j.slideDuration)}};var b=function(f,e){if(f.introActive==1){a(f.contentIntro).hide();a(f.contentWrapper).attr("class","")}if(f.contentResize==1&&parseInt(a(f.contentWrapper).height())!=parseInt(a(f.contentList[e]).height()+10)){a(f.contentWrapper).animate({height:a(f.contentList[e]).height()+10},f.contentResizeSpeed,function(){c(f,e)})}else{c(f,e)}if(f.navType==2){a(f.navWrapper).find(".counter_current").text(e+1)}};var c=function(f,e){a(f.contentList).hide();a(f.contentList[e]).show();if(f.contentLinksWrapper!=null){a(f.contentLinksList).removeClass("current");a(f.contentLinksList[e]).addClass("current")}}})(jQuery);(function(f){f.fn.thslide=function(p,r){var q=f.extend({navPreviousWrapper:".thslide_nav_previous a",navNextWrapper:".thslide_nav_next a",listWrapper:".thslide_list ul",items:".thslide_list ul li a",itemOffset:100,itemVisible:3,slideSpeedSlow:600,slideSpeedFast:200,infiniteScroll:0,scrollOver:0,debug:0},p||{});q.navPreviousWrapper=f(this).find(q.navPreviousWrapper);q.navNextWrapper=f(this).find(q.navNextWrapper);q.listWrapper=f(this).find(q.listWrapper);q.items=f(this).find(q.items);q.totalItem=f(q.listWrapper).find("li").length;q.itemOffsetMax;q.listMarginLeft;q.slideSpeed;q.easing;q.locked=false;q.scrollOn=false;q.scrollTimer=0;q.navTimer;q.offsetStatus=0;q.offsetCurrent=2;q.manualCarousel=0;q.slideDuration=5000;q.autoSlid=false;q.wrapNum=q.itemVisible;q.wrapMid=q.offsetCurrent;if(q.totalItem<q.itemVisible){q.wrapNum=q.totalItem}if(q.totalItem==1){f(".thslide_nav_previous").hide();f(".thslide_nav_next").hide();return}if(q.manualCarousel==0){d(q)}if(q.totalItem<3){q.offsetCurrent=f(".thslide_item").length;q.wrapMid=q.offsetCurrent}if(r!=undefined){a(q,r)}k(q);q.itemOffsetMax=parseInt(f(q.listWrapper).find("li").length)*q.itemOffset-(q.itemVisible*q.itemOffset);q.itemOffsetMax=-parseInt(q.itemOffsetMax);q.items.click(function(t){var s=f(t.target);if(s.parent().attr("href")!=undefined){window.location.href=s.parent().attr("href");return}id=f(this).attr("id");thecount=id.split("_");thecount=thecount[1];a(q,thecount);f("#screening_hidden_"+thecount).click();window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navPreviousWrapper).click(function(){window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navNextWrapper).click(function(){window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navPreviousWrapper).mousedown(function(){window.clearTimeout(q.timerCarousel);window.clearTimeout(q.navTimer);q.scrollOn=true;q.slideSpeed=q.slideSpeedFast;q.easing="swing";o();b(q)});f(q.navNextWrapper).mousedown(function(){window.clearTimeout(q.timerCarousel);window.clearTimeout(q.navTimer);q.scrollOn=true;q.slideSpeed=q.slideSpeedFast;q.easing="swing";o();c(q)});f(q.navPreviousWrapper).mouseup(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});f(q.navNextWrapper).mouseup(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});if(q.scrollOver==1){f(q.navPreviousWrapper).mouseover(function(){if(!q.scrollOn){q.scrollOn=true;q.slideSpeed=q.slideSpeedSlow;q.easing="linear";var s=function(){b(q)};q.navTimer=window.setTimeout(s,q.scrollTimer)}});f(q.navNextWrapper).mouseover(function(){if(!q.scrollOn){q.scrollOn=true;q.slideSpeed=q.slideSpeedSlow;q.easing="linear";var s=function(){c(q)};q.navTimer=window.setTimeout(s,q.scrollTimer)}});f(q.navPreviousWrapper).mouseout(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});f(q.navNextWrapper).mouseout(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()})}return this};var b=function(p){if(!p.locked&&p.scrollOn&&((parseInt(p.listMarginLeft)+parseInt(p.itemOffset)<=0)||p.infiniteScroll==1)){if(p.offsetCount){if(p.offsetCount==p.offsetStatus){p.scrollOn=false;p.offsetStatus=0;p.offsetCount=null;e(p);return}p.offsetStatus+=1}if(p.offsetCurrent==1){p.offsetCurrent=p.totalItem}else{p.offsetCurrent-=1}p.locked=true;if(p.infiniteScroll==1){g(p,function(){n(p)})}else{n(p)}}};var n=function(q){var p=parseInt(q.listMarginLeft)+parseInt(q.itemOffset);if(q.debug==1){console.log("offsetUpdate: "+p)}f(q.listWrapper).animate({marginLeft:p},q.slideSpeed,q.easing,function(){if(q.infiniteScroll==0){k(q)}q.locked=false;if(q.scrollOn){q.easing="linear";b(q)}})};var c=function(q){if(!q.locked&&q.scrollOn&&(((parseInt(q.listMarginLeft)-parseInt(q.itemOffset))>=q.itemOffsetMax)||q.infiniteScroll==1)){if(q.offsetCount){if(q.offsetCount==q.offsetStatus){q.scrollOn=false;q.offsetStatus=0;q.offsetCount=null;e(q);return}q.offsetStatus+=1}if(q.offsetCurrent<q.totalItem){q.offsetCurrent+=1}else{q.offsetCurrent=1}q.locked=true;var p=-parseInt(q.itemOffset);if(q.debug==1){console.log("offsetUpdate: "+p)}f(q.listWrapper).animate({marginLeft:p},q.slideSpeed,q.easing,function(){if(q.infiniteScroll==0){k(q)}else{j(q,null)}q.locked=false;if(q.scrollOn){q.easing="linear";c(q)}})}};var h=function(q){for(var p=0;p<q.totalItem;p++){var r=parseInt(f(q.listWrapper).find("li").length-1)-parseInt(p);f(q.listWrapper).find("li:eq("+r+")").clone().insertBefore(f(q.listWrapper).find("li:first-child")).addClass("thslide_copy")}m(q)};var g=function(p,r){var q=f(p.listWrapper).find("li:last-child");f(p.listWrapper).find("li:first-child").before(q);f(p.listWrapper).css("marginLeft",-parseInt(p.itemOffset));k(p);if(typeof r=="function"){return r()}};var j=function(p,r){var q=f(p.listWrapper).find("li:first-child");f(p.listWrapper).find("li:last-child").after(q);f(p.listWrapper).css("marginLeft",0);k(p);if(typeof r=="function"){return r()}};var k=function(p){p.listMarginLeft=f(p.listWrapper).css("marginLeft").split("px")[0]};var m=function(p){f(p.listWrapper).css("marginLeft",-parseInt(p.itemOffset));k(p)};var o=function(){f(".thslide_list ul li[attachPoint=thslide_parent]").removeAttr("class");f(".thslide_list ul li[attachPoint=thslide_parent] img").attr("class","other");f(".thslide_list ul li[attachPoint=thslide_parent] .thslide_details").attr("class","other thslide_details")};var e=function(p){console.log("#screening_"+p.offsetCurrent);f("#screening_"+p.offsetCurrent).parent().attr("class","current");f("#screening_"+p.offsetCurrent+" img").attr("class","default");f("#screening_"+p.offsetCurrent+" .thslide_details").attr("class","default thslide_details")};var l=function(p){var s=f(".thslide_item img.default").parent().attr("id");if(!s){return}thecount=s.split("_");thecount=thecount[1];if(thecount==p.totalItem){thecount=0}var r=parseInt(thecount);var q=(r+1);a(p,q);f("#screening_hidden_"+q).click();if(p.manualCarousel==0){p.slideDuration=5000;d(p)}};var a=function(q,p){if(p==q.offsetCurrent){return}window.clearTimeout(q.navTimer);q.scrollOn=true;o();q.easing="swing";if(p>q.offsetCurrent){if((q.offsetCurrent<q.wrapMid)&&(p>(q.wrapNum+1))){var r=(parseInt(q.totalItem)+parseInt(q.offsetCurrent))-p;q.offsetCount=r;b(q)}else{q.offsetCount=p-q.offsetCurrent;c(q)}}if(p<q.offsetCurrent){if((q.offsetCurrent>(q.wrapNum+1))&&(p<q.wrapMid)){var r=(parseInt(p)+parseInt(q.totalItem))-parseInt(q.offsetCurrent);q.offsetCount=r;c(q)}else{var r=parseInt(q.offsetCurrent)-parseInt(p);q.offsetCount=r;b(q)}}};var d=function(q){var p=function(){l(q)};q.timerCarousel=window.setTimeout(p,q.slideDuration)}})(jQuery);(function(a){a.fn.jclock=function(c){var b="2.2.0";var d=a.extend({},a.fn.jclock.defaults,c);return this.each(function(){$this=a(this);$this.timerID=null;$this.running=false;$this.increment=0;$this.lastCalled=new Date().getTime();var e=a.meta?a.extend({},d,$this.data()):d;$this.format=e.format;$this.utc=e.utc;$this.utcOffset=(e.utc_offset!=null)?e.utc_offset:e.utcOffset;$this.seedTime=e.seedTime;$this.timeout=e.timeout;$this.css({fontFamily:e.fontFamily,fontSize:e.fontSize,backgroundColor:e.background,color:e.foreground});$this.daysAbbrvNames=new Array(7);$this.daysAbbrvNames[0]="Sun";$this.daysAbbrvNames[1]="Mon";$this.daysAbbrvNames[2]="Tue";$this.daysAbbrvNames[3]="Wed";$this.daysAbbrvNames[4]="Thu";$this.daysAbbrvNames[5]="Fri";$this.daysAbbrvNames[6]="Sat";$this.daysFullNames=new Array(7);$this.daysFullNames[0]="Sunday";$this.daysFullNames[1]="Monday";$this.daysFullNames[2]="Tuesday";$this.daysFullNames[3]="Wednesday";$this.daysFullNames[4]="Thursday";$this.daysFullNames[5]="Friday";$this.daysFullNames[6]="Saturday";$this.monthsAbbrvNames=new Array(12);$this.monthsAbbrvNames[0]="Jan";$this.monthsAbbrvNames[1]="Feb";$this.monthsAbbrvNames[2]="Mar";$this.monthsAbbrvNames[3]="Apr";$this.monthsAbbrvNames[4]="May";$this.monthsAbbrvNames[5]="Jun";$this.monthsAbbrvNames[6]="Jul";$this.monthsAbbrvNames[7]="Aug";$this.monthsAbbrvNames[8]="Sep";$this.monthsAbbrvNames[9]="Oct";$this.monthsAbbrvNames[10]="Nov";$this.monthsAbbrvNames[11]="Dec";$this.monthsFullNames=new Array(12);$this.monthsFullNames[0]="January";$this.monthsFullNames[1]="February";$this.monthsFullNames[2]="March";$this.monthsFullNames[3]="April";$this.monthsFullNames[4]="May";$this.monthsFullNames[5]="June";$this.monthsFullNames[6]="July";$this.monthsFullNames[7]="August";$this.monthsFullNames[8]="September";$this.monthsFullNames[9]="October";$this.monthsFullNames[10]="November";$this.monthsFullNames[11]="December";a.fn.jclock.startClock($this)})};a.fn.jclock.startClock=function(b){a.fn.jclock.stopClock(b);a.fn.jclock.displayTime(b)};a.fn.jclock.stopClock=function(b){if(b.running){clearTimeout(b.timerID)}b.running=false};a.fn.jclock.displayTime=function(b){var c=a.fn.jclock.getTime(b);b.html(c);b.timerID=setTimeout(function(){a.fn.jclock.displayTime(b)},b.timeout)};a.fn.jclock.getTime=function(c){if(typeof(c.seedTime)=="undefined"){var b=new Date()}else{c.increment+=new Date().getTime()-c.lastCalled;var b=new Date(c.seedTime+c.increment);c.lastCalled=new Date().getTime()}if(c.utc==true){var e=b.getTime();var k=b.getTimezoneOffset()*60000;var h=e+k;var l=h+(3600000*c.utcOffset);b=new Date(l)}var f="";var d=0;var g=0;while((g=c.format.indexOf("%",d))!=-1){f+=c.format.substring(d,g);g++;var j=a.fn.jclock.getProperty(b,c,c.format.charAt(g));g++;f+=j;d=g}f+=c.format.substring(d);return f};a.fn.jclock.getProperty=function(d,c,e){switch(e){case"a":return(c.daysAbbrvNames[d.getDay()]);case"A":return(c.daysFullNames[d.getDay()]);case"b":return(c.monthsAbbrvNames[d.getMonth()]);case"B":return(c.monthsFullNames[d.getMonth()]);case"d":return((d.getDate()<10)?"0":"")+d.getDate();case"H":return((d.getHours()<10)?"0":"")+d.getHours();case"I":var b=(d.getHours()%12||12);return((b<10)?"0":"")+b;case"m":return((d.getMonth()<10)?"0":"")+(d.getMonth()+1);case"M":return((d.getMinutes()<10)?"0":"")+d.getMinutes();case"p":return(d.getHours()<12?"am":"pm");case"P":return(d.getHours()<12?"AM":"PM");case"S":return((d.getSeconds()<10)?"0":"")+d.getSeconds();case"y":return d.getFullYear().toString().substring(2);case"Y":return(d.getFullYear());case"%":return"%"}};a.fn.jclock.defaults={format:"%H:%M:%S",utcOffset:0,utc:false,fontFamily:"",fontSize:"",foreground:"",background:"",seedTime:undefined,timeout:1000}})(jQuery);
/*
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
(function(b){var d={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},a=!1;b(window).bind("load.jcarousel",function(){a=!0});b.jcarousel=function(r,p){this.options=b.extend({},d,p||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;if(!p||p.rtl===void 0){this.options.rtl=(b(r).attr("dir")||b("html").attr("dir")||"").toLowerCase()=="rtl"}this.wh=!this.options.vertical?"width":"height";this.lt=!this.options.vertical?this.options.rtl?"right":"left":"top";for(var q="",o=r.className.split(" "),m=0;m<o.length;m++){if(o[m].indexOf("jcarousel-skin")!=-1){b(r).removeClass(o[m]);q=o[m];break}}r.nodeName.toUpperCase()=="UL"||r.nodeName.toUpperCase()=="OL"?(this.list=b(r),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=b(r),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));if(this.clip.size()===0){this.clip=this.list.wrap("<div></div>").parent()}if(this.container.size()===0){this.container=this.clip.wrap("<div></div>").parent()}q!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+q+'"></div>');this.buttonPrev=b(".jcarousel-prev",this.container);if(this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null){this.buttonPrev=b(this.options.buttonPrevHTML).appendTo(this.container)}this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=b(".jcarousel-next",this.container);if(this.buttonNext.size()===0&&this.options.buttonNextHTML!==null){this.buttonNext=b(this.options.buttonNextHTML).appendTo(this.container)}this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var g=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,q=this.list.children("li"),n=this;if(q.size()>0){var l=0,k=this.options.offset;q.each(function(){n.format(this,k++);l+=n.dimension(this,g)});this.list.css(this.wh,l+100+"px");if(!p||p.size===void 0){this.options.size=q.size()}}this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){n.next()};this.funcPrev=function(){n.prev()};this.funcResize=function(){n.resizeTimer&&clearTimeout(n.resizeTimer);n.resizeTimer=setTimeout(function(){n.reload()},100)};this.options.initCallback!==null&&this.options.initCallback(this,"init");!a&&b.browser.safari?(this.buttons(!1,!1),b(window).bind("load.jcarousel",function(){n.setup()})):this.setup()};var c=b.jcarousel;c.fn=c.prototype={jcarousel:"0.2.8"};c.fn.extend=c.extend=b.extend;c.fn.extend({setup:function(){this.prevLast=this.prevFirst=this.last=this.first=null;this.animating=!1;this.tail=this.resizeTimer=this.timer=null;this.inTail=!1;if(!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var e=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(e,!1);b(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");this.options.initCallback!==null&&this.options.initCallback(this,"reset");this.setup()},reload:function(){this.tail!==null&&this.inTail&&this.list.css(this.lt,c.intval(this.list.css(this.lt))+this.tail);this.tail=null;this.inTail=!1;this.options.reloadCallback!==null&&this.options.reloadCallback(this);if(this.options.visible!==null){var f=this,h=Math.ceil(this.clipping()/this.options.visible),e=0,g=0;this.list.children("li").each(function(j){e+=f.dimension(this,h);j+1<f.first&&(g=e)});this.list.css(this.wh,e+"px");this.list.css(this.lt,-g+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(e){if(e!==void 0){this.options.size=e,this.locked||this.buttons()}return this.options.size},has:function(f,h){if(h===void 0||!h){h=f}if(this.options.size!==null&&h>this.options.size){h=this.options.size}for(var e=f;e<=h;e++){var g=this.get(e);if(!g.length||g.hasClass("jcarousel-item-placeholder")){return !1}}return !0},get:function(e){return b(">.jcarousel-item-"+e,this.list)},add:function(g,n){var f=this.get(g),m=0,l=b(n);if(f.length===0){for(var h,k=c.intval(g),f=this.create(g);;){if(h=this.get(--k),k<=0||h.length){k<=0?this.list.prepend(f):h.after(f);break}}}else{m=this.dimension(f)}l.get(0).nodeName.toUpperCase()=="LI"?(f.replaceWith(l),f=l):f.empty().append(n);this.format(f.removeClass(this.className("jcarousel-item-placeholder")),g);l=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null;m=this.dimension(f,l)-m;g>0&&g<this.first&&this.list.css(this.lt,c.intval(this.list.css(this.lt))-m+"px");this.list.css(this.wh,c.intval(this.list.css(this.wh))+m+"px");return f},remove:function(f){var g=this.get(f);if(g.length&&!(f>=this.first&&f<=this.last)){var e=this.dimension(g);f<this.first&&this.list.css(this.lt,c.intval(this.list.css(this.lt))+e+"px");g.remove();this.list.css(this.wh,c.intval(this.list.css(this.wh))-e+"px")}},next:function(){this.tail!==null&&!this.inTail?this.scrollTail(!1):this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)},scrollTail:function(e){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var f=c.intval(this.list.css(this.lt)),f=!e?f-this.tail:f+this.tail;this.inTail=!e;this.prevFirst=this.first;this.prevLast=this.last;this.animate(f)}},scroll:function(e,f){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(e),f))},pos:function(B,z){var A=c.intval(this.list.css(this.lt));if(this.locked||this.animating){return A}this.options.wrap!="circular"&&(B=B<1?1:this.options.size&&B>this.options.size?this.options.size:B);for(var y=this.first>B,w=this.options.wrap!="circular"&&this.first<=1?1:this.first,t=y?this.get(w):this.get(this.last),x=y?w:w-1,v=null,u=0,s=!1,r=0;y?--x>=B:++x<B;){v=this.get(x);s=!v.length;if(v.length===0&&(v=this.create(x).addClass(this.className("jcarousel-item-placeholder")),t[y?"before":"after"](v),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(x<=0||x>this.options.size))){t=this.get(this.index(x)),t.length&&(v=this.add(x,t.clone(!0)))}t=v;r=this.dimension(v);s&&(u+=r);if(this.first!==null&&(this.options.wrap=="circular"||x>=1&&(this.options.size===null||x<=this.options.size))){A=y?A+r:A-r}}for(var w=this.clipping(),q=[],f=0,p=0,t=this.get(B-1),x=B;++f;){v=this.get(x);s=!v.length;if(v.length===0){v=this.create(x).addClass(this.className("jcarousel-item-placeholder"));if(t.length===0){this.list.prepend(v)}else{t[y?"before":"after"](v)}if(this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(x<=0||x>this.options.size)){t=this.get(this.index(x)),t.length&&(v=this.add(x,t.clone(!0)))}}t=v;r=this.dimension(v);if(r===0){throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...")}this.options.wrap!="circular"&&this.options.size!==null&&x>this.options.size?q.push(v):s&&(u+=r);p+=r;if(p>=w){break}x++}for(v=0;v<q.length;v++){q[v].remove()}u>0&&(this.list.css(this.wh,this.dimension(this.list)+u+"px"),y&&(A-=u,this.list.css(this.lt,c.intval(this.list.css(this.lt))-u+"px")));u=B+f-1;if(this.options.wrap!="circular"&&this.options.size&&u>this.options.size){u=this.options.size}if(x>u){f=0;x=u;for(p=0;++f;){v=this.get(x--);if(!v.length){break}p+=this.dimension(v);if(p>=w){break}}}x=u-f+1;this.options.wrap!="circular"&&x<1&&(x=1);if(this.inTail&&y){A+=this.tail,this.inTail=!1}this.tail=null;if(this.options.wrap!="circular"&&u==this.options.size&&u-f+1>=1&&(y=c.intval(this.get(u).css(!this.options.vertical?"marginRight":"marginBottom")),p-y>w)){this.tail=p-w-y}if(z&&B===this.options.size&&this.tail){A-=this.tail,this.inTail=!0}for(;B-->x;){A+=this.dimension(this.get(B))}this.prevFirst=this.first;this.prevLast=this.last;this.first=x;this.last=u;return A},animate:function(g,k){if(!this.locked&&!this.animating){this.animating=!0;var e=this,j=function(){e.animating=!1;g===0&&e.list.css(e.lt,0);!e.autoStopped&&(e.options.wrap=="circular"||e.options.wrap=="both"||e.options.wrap=="last"||e.options.size===null||e.last<e.options.size||e.last==e.options.size&&e.tail!==null&&!e.inTail)&&e.startAuto();e.buttons();e.notify("onAfterAnimation");if(e.options.wrap=="circular"&&e.options.size!==null){for(var f=e.prevFirst;f<=e.prevLast;f++){f!==null&&!(f>=e.first&&f<=e.last)&&(f<1||f>e.options.size)&&e.remove(f)}}};this.notify("onBeforeAnimation");if(!this.options.animation||k===!1){this.list.css(this.lt,g+"px"),j()}else{var h=!this.options.vertical?this.options.rtl?{right:g}:{left:g}:{top:g},j={duration:this.options.animation,easing:this.options.easing,complete:j};if(b.isFunction(this.options.animationStepCallback)){j.step=this.options.animationStepCallback}this.list.animate(h,j)}}},startAuto:function(e){if(e!==void 0){this.options.auto=e}if(this.options.auto===0){return this.stopAuto()}if(this.timer===null){this.autoStopped=!1;var f=this;this.timer=window.setTimeout(function(){f.next()},this.options.auto*1000)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){if(this.timer!==null){window.clearTimeout(this.timer),this.timer=null}},buttons:function(f,g){if(f==null&&(f=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size)){f=this.tail!==null&&!this.inTail}if(g==null&&(g=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),!this.locked&&(!this.options.wrap||this.options.wrap=="last")&&this.options.size!==null&&this.first==1)){g=this.tail!==null&&this.inTail}var e=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),f&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[f?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",f?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=f&&this.buttonNext.each(function(){e.options.buttonNextCallback(e,this,f)}).data("jcarouselstate",f)):this.options.buttonNextCallback!==null&&this.buttonNextState!=f&&this.options.buttonNextCallback(e,null,f);this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),g&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[g?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",g?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=g&&this.buttonPrev.each(function(){e.options.buttonPrevCallback(e,this,g)}).data("jcarouselstate",g)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=g&&this.options.buttonPrevCallback(e,null,g);this.buttonNextState=f;this.buttonPrevState=g},notify:function(e){var f=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",e,f);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",e,f,this.first),this.callback("itemFirstOutCallback",e,f,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",e,f,this.last),this.callback("itemLastOutCallback",e,f,this.prevLast));this.callback("itemVisibleInCallback",e,f,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",e,f,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(t,r,s,q,o,l,p){if(!(this.options[t]==null||typeof this.options[t]!="object"&&r!="onAfterAnimation")){var n=typeof this.options[t]=="object"?this.options[t][r]:this.options[t];if(b.isFunction(n)){var m=this;if(q===void 0){n(m,s,r)}else{if(o===void 0){this.get(q).each(function(){n(m,this,q,s,r)})}else{for(var t=function(e){m.get(e).each(function(){n(m,this,e,s,r)})},g=q;g<=o;g++){g!==null&&!(g>=l&&g<=p)&&t(g)}}}}}},create:function(e){return this.format("<li></li>",e)},format:function(f,h){for(var f=b(f),e=f.get(0).className.split(" "),g=0;g<e.length;g++){e[g].indexOf("jcarousel-")!=-1&&f.removeClass(e[g])}f.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+h)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",h);return f},className:function(e){return e+" "+e+(!this.options.vertical?"-horizontal":"-vertical")},dimension:function(f,h){var e=b(f);if(h==null){return !this.options.vertical?e.outerWidth(!0)||c.intval(this.options.itemFallbackDimension):e.outerHeight(!0)||c.intval(this.options.itemFallbackDimension)}else{var g=!this.options.vertical?h-c.intval(e.css("marginLeft"))-c.intval(e.css("marginRight")):h-c.intval(e.css("marginTop"))-c.intval(e.css("marginBottom"));b(e).css(this.wh,g+"px");return this.dimension(e)}},clipping:function(){return !this.options.vertical?this.clip[0].offsetWidth-c.intval(this.clip.css("borderLeftWidth"))-c.intval(this.clip.css("borderRightWidth")):this.clip[0].offsetHeight-c.intval(this.clip.css("borderTopWidth"))-c.intval(this.clip.css("borderBottomWidth"))},index:function(e,f){if(f==null){f=this.options.size}return Math.round(((e-1)/f-Math.floor((e-1)/f))*f)+1}});c.extend({defaults:function(e){return b.extend(d,e||{})},intval:function(e){e=parseInt(e,10);return isNaN(e)?0:e},windowLoaded:function(){a=!0}});b.fn.jcarousel=function(f){if(typeof f=="string"){var g=b(this).data("jcarousel"),e=Array.prototype.slice.call(arguments,1);return g[f].apply(g,e)}else{return this.each(function(){var h=b(this).data("jcarousel");h?(f&&b.extend(h.options,f),h.reload()):b(this).data("jcarousel",new c(this,f))})}}})(jQuery);(function(b){b.fn.extend({reflect:function(a){a=b.extend({height:1/3,opacity:0.5},a);return this.unreflect().each(function(){var f=this;if(/^img$/i.test(f.tagName)){function e(){var r=f.width,s=f.height,d,p,c,q,n;p=Math.floor((a.height>1)?Math.min(s,a.height):s*a.height);if(b.browser.msie){d=b("<img class='canvas' />").attr("src",f.src).css({width:r,height:s,marginBottom:p-s,filter:"flipv progid:DXImageTransform.Microsoft.Alpha(opacity="+(a.opacity*100)+", style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy="+(p/s*100)+")"})[0]}else{d=b("<canvas class='canvas'/>")[0];if(!d.getContext){return}q=d.getContext("2d");try{b(d).attr({width:r,height:p});q.save();q.translate(0,s-1);q.scale(1,-1);q.drawImage(f,0,0,r,s);q.restore();q.globalCompositeOperation="destination-out";n=q.createLinearGradient(0,0,0,p);n.addColorStop(0,"rgba(255, 255, 255, "+(1-a.opacity)+")");n.addColorStop(1,"rgba(255, 255, 255, 1.0)");q.fillStyle=n;q.rect(0,0,r,p);q.fill()}catch(o){return}}b(d).css({display:"block",border:0});c=b(/^a$/i.test(f.parentNode.tagName)?"<span />":"<div />").insertAfter(f).append([f,d])[0];c.className=f.className;b.data(f,"reflected",c.style.cssText=f.style.cssText);b(c).css({width:r,height:s+p,overflow:"hidden"});f.style.cssText="display: block; border: 0px";f.className="reflected"}if(f.complete){e()}else{b(f).load(e)}}})},unreflect:function(){return this.unbind("load").each(function(){var f=this,a=b.data(this,"reflected"),e;if(a!==undefined){e=f.parentNode;f.className=e.className;f.style.cssText=a;b.removeData(f,"reflected");e.parentNode.replaceChild(f,e)}})}})})(jQuery);jQuery(function(a){a("img.reflect").reflect({})});carousel_auto_increment=6;var carousel={home_carousel:null,films:null,auto_increment:6,currentFilm:null,setOpts:function(){carousel.overlay=$("#carousel ul li .overlay");carousel.carouselPopup=$("#carousel-popup");carousel.trailerPopup=$("#trailer-popup");carousel.carouselOverlay=$(".jcarousel-container #carousel-overlay");carousel.firstVisibleId="";carousel.lastVisibleId="";carousel.zoomOutProgress=false;carousel.reflectOptions={height:"55",opacity:0.4};carousel.zoomInDefaultOptions={width:"183px",height:"267px",left:"-7px",top:"-21px"};carousel.zoomInFirstOptions={width:"183px",height:"267px",left:"6px",top:"-21px"};carousel.zoomInLastOptions={width:"183px",height:"267px",left:"-20px",top:"-21px"};carousel.zoomOutOptions={width:"163px",height:"235px",left:"0px",top:"0px"};carousel.rZoomDefaultOptions={width:"183px",left:"-7px"};carousel.rZoomFirstOptions={width:"183px",left:"6px"};carousel.rZoomLastOptions={width:"183px",left:"-20px"};carousel.rZoomOutOptions={width:"163px",left:"0px"}},init:function(){carousel.films=cfilms;$("#main_carousel").jcarousel(carousel.jCarouselOptions);if($.browser.msie){carousel.carouselOverlay.css("z-index","-1")}$(".jcarousel-container").append('<div id="carousel-overlay" class="overlay"></div>')},reset:function(){carousel.firstVisibleId=$("#carousel ul li:first").attr("id");$("#carousel .jcarousel-container img.reflected").reflect(carousel.reflectOptions);$("#carousel").css("overflow","visible");$("#carousel_trailer_link").click(function(){carousel.populateVideo()})},bind:function(){$("#carousel img.reflected").mouseenter(function(){carousel.zoomOutProgress=false;var b=$(this);var e=b.parent().parent()[0].id;carousel.carouselOverlay.show();carousel.overlay.show();$("#"+e+" .overlay").hide();var d=$("#"+e+" .canvas");var a=carousel.getZoomOptions(e);var c=carousel.getReflectZoomOptions(e);$("#"+e).css("z-index","4");b.animate(a,function(){carousel.toggleImgContainer(e,"in")}).after(function(){d.animate(carousel.reflectZoomOptions);changeScreeningDate($(this).attr("index"))})}).mouseleave(function(){carousel.zoomOutProgress=true;var a=$(this);var c=a.parent().parent()[0].id;var b=$("#"+c+" .canvas");carousel.toggleImgContainer(c,"out");$("#"+c).css("z-index","2");a.animate(carousel.zoomOutOptions,function(){carousel.carouselOverlay.hide()}).after(function(){b.animate(carousel.rZoomOutOptions)})})},jCarouselOptions:{scroll:1,auto:carousel_auto_increment,wrap:"last",initCallback:initCallback,itemFirstInCallback:{onAfterAnimation:findFirstVisible},itemLastInCallback:{onAfterAnimation:findLastVisible}},link:function(){$("#carousel img.reflected").click(function(){carousel.populatePopup($(this));carousel.carouselPopup.fadeIn()});$("#carousel-popup .pop_mid .carousel-popup-close a").click(function(a){a.preventDefault();carousel.carouselPopup.fadeOut()});$("#trailer-popup .pop_mid .carousel-popup-close a").click(function(a){a.preventDefault();carousel.stopVideo()})},toggleImgContainer:function(b,a){var c=$("#"+b+" .img-container");if(a=="in"){if(b==carousel.firstVisibleId){c.removeClass("img-container-last").addClass("img-container-first")}else{if(b==lastVisibleId){c.removeClass("img-container-first").addClass("img-container-last")}else{c.removeClass("img-container-first img-container-last")}}if(carousel.zoomOutProgress){c.hide()}else{c.fadeIn("fast")}}else{c.hide()}},getZoomOptions:function(a){if(a==carousel.firstVisibleId){return carousel.zoomInFirstOptions}else{if(a==lastVisibleId){return carousel.zoomInLastOptions}else{return carousel.zoomInDefaultOptions}}},getReflectZoomOptions:function(a){if(a==carousel.firstVisibleId){return carousel.rZoomFirstOptions}else{if(a==carousel.lastVisibleId){return carousel.rZoomLastOptions}else{return carousel.rZoomDefaultOptions}}},populatePopup:function(o){filmId=o.attr("index");filmType=o.attr("type");filmShort=o.attr("name");console.log("carousel populate");carousel.currentFilm=filmId;var v=$("#carousel_photo_container");var d=$("#carousel_film_title");var w=$("#carousel_film_description");var x=$("#carousel_film_info");var f=$("#carousel_movie_link");var n=$("#carousel_film_link");var q=$("#carousel_host_link");var u=carousel.films[filmId]["allow_hosting"];var h="";var b="";var c='<div class="date tzDate" name="{$insert_date_edt_timestamp}" lang="mmm dd, yyyy">{$insert_date_here}</div><div class="hours">{$insert_hours_here}</div>';$("#carousel_host_link").show();v.attr("src",carousel.films[filmId]["logo_src"]);if(filmType=="programResources"){q.attr("href","/film/"+filmShort+"/host_screening");n.attr("href","/film/"+filmShort)}else{q.attr("href","/film/"+carousel.films[filmId]["id"]+"/host_screening");n.attr("href","/film/"+carousel.films[filmId]["id"])}d.html(carousel.films[filmId]["name"]);w.html(carousel.films[filmId]["synopsis"]);x.html(carousel.films[filmId]["info"]);var p="";var g=new Date();var j=g.getFullYear();var t=g.getMonth()+1;if(t<10){t="0"+t}var r=g.getDate();if(r<10){r="0"+r}g=j+"-"+t+"-"+r;if(u=="0"){$("#carousel_host_link").hide()}if(carousel.films[filmId]["screenings"]!=undefined){var k=false;for(var m=0;m<carousel.films[filmId]["screenings"].length;m++){var s=carousel.films[filmId]["screenings"][m];if(s.date===g){if(!k){p="Today's Showtimes: ";k=true;p=p+'<a class="link" href="/screening/'+s.unique_key+'">'+s.date_time_with.substr(-7)+"</a>"}else{p=p+'; <a class="link" href="/screening/'+s.unique_key+'">'+s.date_time_with.substr(-7)+"</a>"}}}if(k){p=p+carousel.films[filmId]["screenings"][0]["timezone"]}f.html(p)}if(carousel.films[filmId]["screenings_per_day"]!=undefined){var a=0;for(screeningDate in carousel.films[filmId]["screenings_per_day"]){if(a<3){var l=0;if(l<6){h=h+c.replace("{$insert_date_here}",screeningDate);h=h.replace("{$insert_date_edt_timestamp}",carousel.films[filmId]["screenings_per_day"][screeningDate][0]["date_edt_timestamp"]);b="";for(it in carousel.films[filmId]["screenings_per_day"][screeningDate]){for(screeningHour in carousel.films[filmId]["screenings_per_day"][screeningDate][it]){if(screeningHour=="time"){var e=carousel.films[filmId]["screenings_per_day"][screeningDate][it];if(e.type==0){b=b+'<a href="'+e.url+'" class="tzDate" name="'+e.edt_timestamp+'" lang="h:MMTT">'+e.time+"</a>, "}else{b=b+'<span class="tzDate" name="'+e.edt_timestamp+'" lang="h:MMTT">'+e.time+"</span>, "}}}}l=l+1}a=a+1;b=b.substring(0,b.length-2);h=h.replace("{$insert_hours_here}",b)}}if(a!=0){$("#showtimes-holder").html(h)}else{$("#showtimes-holder").html("No upcoming screenings")}}},populateVideo:function(){carousel.carouselPopup.fadeOut();carousel.trailerPopup.fadeIn();trailer.populateVideo(carousel.currentFilm,carousel.films[carousel.currentFilm]["stream_url"],carousel.films[carousel.currentFilm]["logo_src"])},stopVideo:function(){trailer.stopVideo();carousel.trailerPopup.fadeOut();carousel.carouselPopup.fadeIn()},initAuto:function(){carousel.home_carousel.startAuto(carousel_auto_increment)}};var changeScreeningDate=function(a){$("#screening_date").html("<span>"+films[a]["name"]+":</span> "+(typeof films[a]["screening_date_string"]!="undefined"?films[a]["screening_date_string"]:""))};function findFirstVisible(d,b,a,c){firstVisibleId=b.id}function findLastVisible(d,b,a,c){lastVisibleId=b.id}function initCallback(a){carousel.home_carousel=a;a.buttonNext.bind("click",function(){a.startAuto(0);window.setTimeout(function(){a.startAuto(6)},6000)});a.buttonPrev.bind("click",function(){a.startAuto(0);window.setTimeout(function(){a.startAuto(6)},6000)});a.clip.hover(function(){a.stopAuto()},function(){a.startAuto()})}$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}carousel.setOpts();carousel.init();carousel.reset();carousel.bind();carousel.link()});var screenings_carousel={init:function(){if($("#barousel_thslide").length>0){$("#barousel_thslide").barousel({navWrapper:"#thslide_barousel_nav .thslide_hidden",manualCarousel:1,navType:3});$("#thslide_barousel_nav").thslide({infiniteScroll:1,itemOffset:93})}}};$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}if($("#barousel_thslide").length>0){screenings_carousel.init()}});$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}$(".screening_list").jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:30,verticalGutter:0})});$(document).ready(function(){genre_search.init()});var genre_search={init:function(){$("#gv").keydown(function(b){var a=b.keyCode||b.which;if(a==13){$.ajax({url:"/services/CarouselSearch/"+$("#gv").val(),dataType:"text",type:"GET",success:function(c){carousel_auto_increment=0;genre_search.populateCarousel(c)},error:function(c){}});return false}});$("#gs").click(function(){$("#drop_genre").toggle()});$("#gg").click(function(){$.ajax({url:"/services/CarouselSearch/"+$("#gv").val(),dataType:"text",type:"GET",success:function(a){carousel_auto_increment=0;genre_search.populateCarousel(a)},error:function(a){}})});$(".drop_genre li").click(function(a){if($(this).attr("id")=="all"){$.ajax({url:"/services/FeaturedSearch",dataType:"text",type:"GET",success:function(b){$("#drop_genre").toggle();carousel_auto_increment=6;genre_search.populateCarousel(b)},error:function(b){error.showError("notice","communication error","Please try again")}})}else{$.ajax({url:"/services/GenreSearch/"+$(this).attr("id"),dataType:"text",type:"GET",success:function(b){$("#drop_genre").toggle();carousel_auto_increment=0;genre_search.populateCarousel(b)},error:function(b){error.showError("notice","communication error","Please try again")}})}})},populateCarousel:function(response){response=eval("("+response+")");if(response.result==undefined){carousel.initAuto();$("#main_carousel li").remove();i=0;for(film in response){node='<li id="film_'+film+'"><div class="img-container"></div><img class="reflected" index="'+film+'" src="'+response[film]["logo_src"]+'" width="163" height="235" alt="" /><div class="overlay"></div></li>';carousel.home_carousel.add(i+1,node);i++}carousel.home_carousel.size(i);$("#carousel .jcarousel-container img.reflected").reflect(carousel.reflectOptions);var amt=$("#main_carousel").css("left").replace("px","");if(parseInt(amt)<0){$("#main_carousel").css("left",-175)}carousel.home_carousel.scroll(0);carousel.bind();carousel.reset();carousel.link()}else{error.showError("notice","No results.","That search found no films. Please try again")}}};var timezones={init:function(){$("#timezone-select").click(function(a){if(a!=undefined){a.stopPropagation()}$("#timezone-select-popup").fadeIn(100);modal.modalIn(timezones.hidepopup)});$("#timezone-popup-close").click(function(){$("#timezone-select-popup").fadeOut(100)});$("#timezone-button").click(function(a){$("#timezone_form").submit()})},hidepopup:function(a){$("#timezone-select-popup").fadeOut(100)},};$(window).load(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}timezones.init()});var upcoming={theDays:null,specialDays:null,thepage:"date",m_names:new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),init:function(){if(window.location.pathname.match(/\/film/)){upcoming.thepage="film";getUrl="/services/Screenings/upcoming?film="+$("#film").html()}else{getUrl="/services/Screenings/upcoming"}$.ajax({url:getUrl,type:"GET",cache:true,dataType:"text",success:function(b){upcoming.startup(b)},error:function(b){console.log("ERROR:",b)}});if(upcoming.getTheDate()!=""){$("#current_date").html(upcoming.getTheDate());var a={date:$("#current_date").html(),film:$("#film").html()};dateSplit=$("#current_date").html().split("/");$.ajax({url:"/services/Screenings/"+upcoming.thepage,data:$.param(a),type:"GET",cache:true,dataType:"text",success:function(b){$(".ui-datepicker-trigger").html(upcoming.m_names[parseInt(dateSplit[0])-1]+"<br />"+dateSplit[1]);$("#today_screenings").html(b);$(".screening_list").jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:30,verticalGutter:0});if(upcoming.thepage=="film"){$(".screening_link").click(function(c){c.preventDefault();if($("#screening_invite").length>0){$("#screening").html($(this).attr("title"));if(screening_room!=undefined){screening_room.invite()}}else{if($("#screening_purchase").length>0){$("#screening").html($(this).attr("title"));if(screening_room!=undefined){screening_room.pay()}}else{console.log("On Init");$("#login_destination").val($(this).attr("href")+"?currentDate="+$("#current_date").html());$("#signup_destination").val($(this).attr("href")+"?currentDate="+$("#current_date").html());if(login!=undefined){login.showpopup()}}}})}},error:function(b){console.log("ERROR:",b)}})}},startup:function(response){upcoming.theDays=(eval("("+response+")"));if(upcoming.theDays!=null){upcoming.specialDays=upcoming.theDays.days}var d=new Date();var curr_date=d.getDate();var curr_month=d.getMonth();$("#featured_datepicker").datepicker({showOn:"button",buttonText:upcoming.m_names[curr_month]+"<br />"+curr_date,minDate:0,maxDate:60,beforeShowDay:function(thedate){var theyear=thedate.getFullYear();var themonth=thedate.getMonth()+1;var theday=thedate.getDate();if((upcoming.specialDays!=undefined)&&(upcoming.specialDays[theyear]!=undefined)&&(upcoming.specialDays[theyear][themonth]!=undefined)){if(upcoming.specialDays[theyear][themonth][theday]==undefined){return[true,""]}return[true,"specialDate"]}else{return[true,""]}},onSelect:function(dateText,inst){$("#current_date").html(dateText);var args={date:dateText,film:$("#film").html()};dateSplit=dateText.split("/");$.ajax({url:"/services/Screenings/"+upcoming.thepage,data:$.param(args),type:"GET",cache:true,dataType:"text",success:function(response){$(".ui-datepicker-trigger").html(upcoming.m_names[parseInt(dateSplit[0])-1]+"<br />"+dateSplit[1]);$("#today_screenings").html(response);$(".screening_list").jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:30,verticalGutter:0});if(upcoming.thepage=="film"){$(".screening_link").click(function(e){console.log("Upcoming Screening Click");e.preventDefault();if($("#screening_invite").length>0){$("#screening").html($(this).attr("title"));if(screening_room!=undefined){screening_room.invite()}}else{if($("#screening_purchase").length>0){$("#screening").html($(this).attr("title"));console.log("Paying for screening");if(screening_room!=undefined){screening_room.pay()}}else{console.log("On Select");$("#login_destination").val($(this).attr("href")+"?currentDate="+$("#current_date").html());console.log("Set Destination");$("#signup_destination").val($(this).attr("href")+"?currentDate="+$("#current_date").html());console.log("Set Signup");if(login!=undefined){login.showpopup()}}}})}},error:function(response){console.log("ERROR:",response)}})}})},getTheDate:function(){var a="[\\?&]currentDate=([^&#]*)";var c=new RegExp(a);var b=c.exec(window.location.href);if(b==null){return""}else{return b[1]}}};$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}upcoming.init()});jQuery.fn.FeedbackFormToDict=function(){var a=this.serializeArray();var c={};for(var b=0;b<a.length;b++){c[a[b].name]=a[b].value}if(c.next){delete c.next}return c};var feedback={init:function(){if($.cookie("csfeedback")==undefined){$.cookie("csfeedback",-1,{path:"/",expires:365});feedback.surveyAsk()}},surveyAsk:function(){var a='Can you help us make Constellation.tv better by answering a few brief questions?<br /><br /><a class="btn_med" href="javascript:void(0)" onclick="feedback.addTab()" style="padding-top: 15px !important; margin-right: 15px;">Yes, I\'d love to!</a><a class="btn_med" href="javascript:void(0)" onclick="feedback.dropTab()" style="padding-top: 15px !important;">No Thanks!</a>';error.showError("error","We'd love some feedback!",a,0)},addTab:function(a){$.unblockUI();feedback.getFeedback()},dropTab:function(a){$.cookie("csfeedback",-1,{path:"/",expires:365});$.unblockUI()},showTab:function(){var a='<a style="background-color:#222" class="fdbk_tab_left" id="fdbk_tab" href="javascript: void(0)">FEEDBACK</a>';$("body").append(a);$("#fdbk_tab").click(function(b){feedback.getFeedback()})},getFeedback:function(){$("#feedback_popup").fadeIn();$("#feedback").click(function(b){var a=$("#feedback_form").FeedbackFormToDict();$.ajax({url:"/services/UserFeedback",data:$.param(a),dataType:"text",type:"POST",success:function(c){feedback.giveThanks()},error:function(c){console.log("ERROR:",c)}})})},giveThanks:function(){$.cookie("csfeedback",-1,{path:"/",expires:365});var a='<div class="clearfix description">Thank you!</div>';$("#feedbody").html(a);$("#feedback_popup").delay(3000).fadeOut()}};$(document).ready(function(){if(!window.console){window.console={}}if(!window.console.log){window.console.log=function(){}}feedback.showTab();feedback.init()});