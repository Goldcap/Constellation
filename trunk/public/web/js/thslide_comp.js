(function(a){a.fn.barousel=function(f){var h=a.extend({imageWrapper:".barousel_image",contentWrapper:".barousel_content",contentLinksWrapper:null,navWrapper:".barousel_nav",slideDuration:5000,navType:1,fadeIn:1,fadeInSpeed:600,manualCarousel:0,contentResize:1,contentResizeSpeed:300,debug:0},f||{});h.imageWrapper=a(this).find(h.imageWrapper);h.contentWrapper=a(this).find(h.contentWrapper);h.contentLinksWrapper=a(h.contentLinksWrapper);h.navWrapper=a(this).find(h.navWrapper);h.imageList=h.imageWrapper.find("img").not("[class*=intro]");h.contentList=h.contentWrapper.find("div").not("[class*=intro]");h.contentLinksList=h.contentLinksWrapper.find("a");h.imageIntro=h.imageWrapper.find("img[class*=intro]");h.contentIntro=h.contentWrapper.find("div[class*=intro]");h.currentIndex=1;h.totalItem=h.imageList.length;h.stopCarousel=0;h.timerCarousel;h.navFreeze=0;h.introActive=0;if(h.imageWrapper.find("img[class*=intro]").length>0){h.introActive=1}if(h.totalItem==1){}else{h.imageList.each(function(i){this.index=i});h.contentList.each(function(i){this.index=i});h.contentLinksList.each(function(i){this.index=i});if(h.imageList.length!=h.contentList.length){if(h.debug==1){console.log("[Barousel error] images and contents must be the same number")}return this}if(h.contentResize==1&&h.introActive==0){a(h.contentWrapper).height(a(h.contentList[h.currentIndex]).height()+10)}if(h.contentLinksWrapper!=null){a(h.contentLinksList[h.currentIndex]).addClass("current")}if(h.navType==1){var g="<ul>";h.imageList.each(function(j){var i="";if(j==0){i="current"}g+="<li><a href='#' title='"+a(h.contentList[j]).find("p.header").text()+"' class='"+i+"'>&nbsp;</a></li>"});g+="</ul>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a");h.navList.each(function(i){this.index=i})}else{if(h.navType==2){var g="<ul>";g+="<li class='prev'><a href='#' title='previous'>&nbsp;</a></li>";g+="<li class='next'><a href='#' title='next'>&nbsp;</a></li>";g+="</ul><div class='counter'><span class='counter_current'>1</span>/<span class='counter_total'>"+h.totalItem+"</span></div>";h.navWrapper.append(g);h.navList=h.navWrapper.find("a")}else{if(h.navType==3){h.navList=h.navWrapper.find("a");h.navList.each(function(i){this.index=i})}}}a("#barousel_broadcast").click(function(i){console.log("Broadcast says should be loading item "+a(".thslide_list ul .current").attr("id"))});if(h.navType==1||h.navType==3){h.navList.each(function(i){a(this).click(function(){console.log("Type 1 or 3, Clicked "+i);if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;console.log("Current Index is: "+h.currentIndex);if(h.currentIndex!=i||h.introActive==1){console.log("Hitting Load Item");d(h,i);h.currentIndex=i}}h.introActive=0;return false})})}else{if(h.navType==2){h.navList.each(function(){a(this).click(function(){console.log("Type 2, Clicked "+n);if(h.navFreeze==0){window.clearTimeout(h.timerCarousel);h.stopCarousel=1;if(a(this).parent().hasClass("prev")){var j;if(parseInt(h.currentIndex)==0){j=parseInt(h.totalItem)-1}else{j=parseInt(h.currentIndex)-1}d(h,j);h.currentIndex=j}else{if(a(this).parent().hasClass("next")){var i;if(parseInt(h.currentIndex)==(parseInt(h.totalItem)-1)){i=0}else{i=parseInt(h.currentIndex)+1}d(h,i);h.currentIndex=i}}}h.introActive=0;return false})})}}if(h.manualCarousel==0){var e=function(){d(h,1)};h.timerCarousel=window.setTimeout(e,h.slideDuration)}}return this};var d=function(i,g){console.log("Load Item "+g);console.log("Should be loading item "+a(".thslide_list ul .current").attr("id"));if(i.navType!=2){i.navList.each(function(k){a(this).removeClass("current")});a(i.navList[g]).addClass("current")}var j;if(i.introActive==1){j=a(i.imageIntro)}else{j=a(i.imageList[i.currentIndex])}var h=a(i.imageList[g]);if(i.debug==1){console.log("[Barousel loadItem] currentImage:"+j.attr("src"));console.log("[Barousel loadItem] nextImage:"+h.attr("src"))}if(!j.hasClass("default")){j.attr("class","previous")}h.attr("class","current");if(i.fadeIn==0){h.show();j.hide();b(i,g)}else{i.navFreeze=1;a(i.contentList).hide();h.fadeIn(i.fadeInSpeed,function(){j.hide();j.removeClass("previous");i.navFreeze=0});b(i,g)}if(i.stopCarousel==0){i.currentIndex=g;var f;if(i.currentIndex==i.totalItem-1){f=0}else{f=parseInt(i.currentIndex)+1}var e=function(){d(i,f)};i.timerCarousel=window.setTimeout(e,i.slideDuration)}};var b=function(f,e){if(f.introActive==1){a(f.contentIntro).hide();a(f.contentWrapper).attr("class","")}if(f.contentResize==1&&parseInt(a(f.contentWrapper).height())!=parseInt(a(f.contentList[e]).height()+10)){a(f.contentWrapper).animate({height:a(f.contentList[e]).height()+10},f.contentResizeSpeed,function(){c(f,e)})}else{c(f,e)}if(f.navType==2){a(f.navWrapper).find(".counter_current").text(e+1)}};var c=function(f,e){a(f.contentList).hide();a(f.contentList[e]).show();if(f.contentLinksWrapper!=null){a(f.contentLinksList).removeClass("current");a(f.contentLinksList[e]).addClass("current")}}})(jQuery);(function(f){f.fn.thslide=function(p,r){var q=f.extend({navPreviousWrapper:".thslide_nav_previous a",navNextWrapper:".thslide_nav_next a",listWrapper:".thslide_list ul",items:".thslide_list ul li a",itemOffset:280,itemVisible:3,slideSpeedSlow:1000,slideSpeedFast:400,infiniteScroll:0,scrollOver:0,debug:0},p||{});q.navPreviousWrapper=f(this).find(q.navPreviousWrapper);q.navNextWrapper=f(this).find(q.navNextWrapper);q.listWrapper=f(this).find(q.listWrapper);q.items=f(this).find(q.items);q.totalItem=f(q.listWrapper).find("li").length;q.itemOffsetMax;q.listMarginLeft;q.slideSpeed;q.easing="easeInExpo";q.locked=false;q.scrollOn=false;q.scrollTimer=0;q.navTimer;q.offsetStatus=0;q.offsetCurrent=2;q.manualCarousel=0;q.slideDuration=4000;q.autoSlid=true;q.wrapNum=q.itemVisible;q.wrapMid=q.offsetCurrent;if(q.totalItem<q.itemVisible){q.wrapNum=q.totalItem}if(q.totalItem<=1){f(".thslide_nav_previous").hide();f(".thslide_nav_next").hide();f(".barousel_image img").show();f("div[title=barousel_item_1]").show();f("#screening_1 img").attr("class","default");f("#screening_1 span").attr("class","default");return}if(q.manualCarousel==0){d(q)}if(q.totalItem<3){q.offsetCurrent=f(".thslide_item").length;q.wrapMid=q.offsetCurrent}if(r!=undefined){a(q,r)}j(q);q.itemOffsetMax=parseInt(f(q.listWrapper).find("li").length)*q.itemOffset-(q.itemVisible*q.itemOffset);q.itemOffsetMax=-parseInt(q.itemOffsetMax);q.items.click(function(t){var s=f(t.target);id=f(this).attr("id");thecount=id.split("_");thecount=thecount[1];a(q,thecount);f("#screening_hidden_"+thecount).click();window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navPreviousWrapper).click(function(){window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navNextWrapper).click(function(){window.clearTimeout(q.timerCarousel);q.slideDuration=20000;d(q);return false});f(q.navPreviousWrapper).mousedown(function(){window.clearTimeout(q.timerCarousel);window.clearTimeout(q.navTimer);q.scrollOn=true;q.slideSpeed=q.slideSpeedFast;o();b(q)});f(q.navNextWrapper).mousedown(function(){window.clearTimeout(q.timerCarousel);window.clearTimeout(q.navTimer);q.scrollOn=true;q.slideSpeed=q.slideSpeedFast;o();c(q)});f(q.navPreviousWrapper).mouseup(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});f(q.navNextWrapper).mouseup(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});if(q.scrollOver==1){f(q.navPreviousWrapper).mouseover(function(){if(!q.scrollOn){q.scrollOn=true;q.slideSpeed=q.slideSpeedSlow;var s=function(){b(q)};q.navTimer=window.setTimeout(s,q.scrollTimer)}});f(q.navNextWrapper).mouseover(function(){if(!q.scrollOn){q.scrollOn=true;q.slideSpeed=q.slideSpeedSlow;var s=function(){c(q)};q.navTimer=window.setTimeout(s,q.scrollTimer)}});f(q.navPreviousWrapper).mouseout(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()});f(q.navNextWrapper).mouseout(function(){q.scrollOn=false;e(q);f("#screening_hidden_"+q.offsetCurrent).click()})}return this};var b=function(p){if(!p.locked&&p.scrollOn&&((parseInt(p.listMarginLeft)+parseInt(p.itemOffset)<=0)||p.infiniteScroll==1)){if(p.offsetCount){if(p.offsetCount==p.offsetStatus){p.scrollOn=false;p.offsetStatus=0;p.offsetCount=null;e(p);return}p.offsetStatus+=1}if(p.offsetCurrent==1){p.offsetCurrent=p.totalItem}else{p.offsetCurrent-=1}p.locked=true;if(p.infiniteScroll==1){g(p,function(){m(p)})}else{m(p)}}};var m=function(q){var p=parseInt(q.listMarginLeft)+parseInt(q.itemOffset);if(q.debug==1){console.log("offsetUpdate: "+p)}f(q.listWrapper).animate({marginLeft:p},q.slideSpeed,q.easing,function(){if(q.infiniteScroll==0){j(q)}q.locked=false;if(q.scrollOn){b(q)}})};var c=function(q){if(!q.locked&&q.scrollOn&&(((parseInt(q.listMarginLeft)-parseInt(q.itemOffset))>=q.itemOffsetMax)||q.infiniteScroll==1)){if(q.offsetCount){if(q.offsetCount==q.offsetStatus){q.scrollOn=false;q.offsetStatus=0;q.offsetCount=null;e(q);return}q.offsetStatus+=1}if(q.offsetCurrent<q.totalItem){q.offsetCurrent+=1}else{q.offsetCurrent=1}q.locked=true;var p=-parseInt(q.itemOffset);if(q.debug==1){console.log("offsetUpdate: "+p)}f(q.listWrapper).animate({marginLeft:p},q.slideSpeed,q.easing,function(){if(q.infiniteScroll==0){j(q)}else{i(q,null)}q.locked=false;if(q.scrollOn){c(q)}})}};var h=function(q){for(var p=0;p<q.totalItem;p++){var r=parseInt(f(q.listWrapper).find("li").length-1)-parseInt(p);f(q.listWrapper).find("li:eq("+r+")").clone().insertBefore(f(q.listWrapper).find("li:first-child")).addClass("thslide_copy")}l(q)};var g=function(p,r){var q=f(p.listWrapper).find("li:last-child");f(p.listWrapper).find("li:first-child").before(q);f(p.listWrapper).css("marginLeft",-parseInt(p.itemOffset));j(p);if(typeof r=="function"){return r()}};var i=function(p,r){var q=f(p.listWrapper).find("li:first-child");f(p.listWrapper).find("li:last-child").after(q);f(p.listWrapper).css("marginLeft",0);j(p);if(typeof r=="function"){return r()}};var j=function(p){if(f(p.listWrapper).css("marginLeft")!=undefined){p.listMarginLeft=f(p.listWrapper).css("marginLeft").split("px")[0]}};var l=function(p){f(p.listWrapper).css("marginLeft",-parseInt(p.itemOffset));j(p)};var o=function(){f(".thslide_list ul li[attachPoint=thslide_parent]").removeAttr("class");f(".thslide_list ul li[attachPoint=thslide_parent] img").attr("class","other");f(".thslide_list ul li[attachPoint=thslide_parent] .thslide_details").attr("class","other thslide_details")};var e=function(p){f("#screening_"+p.offsetCurrent).attr("class","current");f("#screening_"+p.offsetCurrent+" img").attr("class","default");f("#screening_"+p.offsetCurrent+" .thslide_details").attr("class","default thslide_details");f(".barousel_image a").hide();f(".barousel_image a img").hide();f(".barousel_image a:nth-child("+p.offsetCurrent+") img").show();f(".barousel_image a:nth-child("+p.offsetCurrent+")").fadeIn("slow","linear");f(".barousel_content div").hide();f(".barousel_content div:nth-child("+p.offsetCurrent+")").fadeIn("slow","linear")};var k=function(p){var s=f(".thslide_list li.current").attr("id");if(!s){console.log("No ID!");return}thecount=s.split("_");thecount=thecount[1];if(thecount==p.totalItem){thecount=0}var r=parseInt(thecount);var q=(r+1);a(p,q);f("#screening_hidden_"+q).click();if(p.manualCarousel==0){p.slideDuration=5000;d(p)}};var a=function(q,p){if(p==q.offsetCurrent){return}window.clearTimeout(q.navTimer);q.scrollOn=true;o();if(p>q.offsetCurrent){if((q.offsetCurrent<q.wrapMid)&&(p>(q.wrapNum+1))){var r=(parseInt(q.totalItem)+parseInt(q.offsetCurrent))-p;q.offsetCount=r;b(q)}else{q.offsetCount=p-q.offsetCurrent;c(q)}}if(p<q.offsetCurrent){if((q.offsetCurrent>(q.wrapNum+1))&&(p<q.wrapMid)){var r=(parseInt(p)+parseInt(q.totalItem))-parseInt(q.offsetCurrent);q.offsetCount=r;c(q)}else{var r=parseInt(q.offsetCurrent)-parseInt(p);q.offsetCount=r;b(q)}}};var d=function(q){var p=function(){k(q)};q.timerCarousel=window.setTimeout(p,q.slideDuration)}})(jQuery);